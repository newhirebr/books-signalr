name: Flutter CI/CD

on:
  push:
    branches:
      - signal-r

jobs:
  build:
    runs-on: macos-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Setup Flutter
      uses: subosito/flutter-action@v2
      with:
        flutter-version: '3.13.9' # use the version you need

    - name: Install dependencies
      run: flutter pub get

    - name: Install CocoaPods dependencies
      run: cd ios && pod install && cd ..

    - name: Build iOS
      run: flutter build ios --release --no-codesign

    - name: Install Apple certificate and provisioning profile
      env:
        APPLE_CERTIFICATE: "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"
        P12_PASSWORD: "745HX£325FH!"
        PROVISIONING_PROFILE: "MIIviQYJKoZIhvcNAQcCoIIvejCCL3YCAQExCzAJBgUrDgMCGgUAMIIflgYJKoZIhvcNAQcBoIIfhwSCH4M8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCI/Pgo8IURPQ1RZUEUgcGxpc3QgUFVCTElDICItLy9BcHBsZS8vRFREIFBMSVNUIDEuMC8vRU4iICJodHRwOi8vd3d3LmFwcGxlLmNvbS9EVERzL1Byb3BlcnR5TGlzdC0xLjAuZHRkIj4KPHBsaXN0IHZlcnNpb249IjEuMCI+CjxkaWN0PgoJPGtleT5BcHBJRE5hbWU8L2tleT4KCTxzdHJpbmc+c2lnbmFsIHIgYm9va3M8L3N0cmluZz4KCTxrZXk+QXBwbGljYXRpb25JZGVudGlmaWVyUHJlZml4PC9rZXk+Cgk8YXJyYXk+Cgk8c3RyaW5nPk04WTJSUDg2NzU8L3N0cmluZz4KCTwvYXJyYXk+Cgk8a2V5PkNyZWF0aW9uRGF0ZTwva2V5PgoJPGRhdGU+MjAyMy0wNi0xMlQxNjozNzo1OVo8L2RhdGU+Cgk8a2V5PlBsYXRmb3JtPC9rZXk+Cgk8YXJyYXk+CgkJPHN0cmluZz5pT1M8L3N0cmluZz4KCTwvYXJyYXk+Cgk8a2V5PklzWGNvZGVNYW5hZ2VkPC9rZXk+Cgk8ZmFsc2UvPgoJPGtleT5EZXZlbG9wZXJDZXJ0aWZpY2F0ZXM8L2tleT4KCTxhcnJheT4KCQk8ZGF0YT5NSUlGNXpDQ0JNK2dBd0lCQWdJUUxXUTlkQzhqdlFGUk9La3I1cWZHY3pBTkJna3Foa2lHOXcwQkFRc0ZBREIxTVVRd1FnWURWUVFERER0QmNIQnNaU0JYYjNKc1pIZHBaR1VnUkdWMlpXeHZjR1Z5SUZKbGJHRjBhVzl1Y3lCRFpYSjBhV1pwWTJGMGFXOXVJRUYxZEdodmNtbDBlVEVMTUFrR0ExVUVDd3dDUnpNeEV6QVJCZ05WQkFvTUNrRndjR3hsSUVsdVl5NHhDekFKQmdOVkJBWVRBbFZUTUI0WERUSXlNRGd5TmpFeE5UTTBORm9YRFRJek1EZ3lOakV4TlRNME0xb3dnYTB4R2pBWUJnb0praWFKay9Jc1pBRUJEQXBOT0ZreVVsQTROamMxTVVZd1JBWURWUVFEREQxQmNIQnNaU0JFYVhOMGNtbGlkWFJwYjI0NklFeDFibUVnVW1WelpXRnlZMmdnUTI5c2JHVmpkR2wyWlNCTVRFTWdLRTA0V1RKU1VEZzJOelVwTVJNd0VRWURWUVFMREFwTk9Ga3lVbEE0TmpjMU1TVXdJd1lEVlFRS0RCeE1kVzVoSUZKbGMyVmhjbU5vSUVOdmJHeGxZM1JwZG1VZ1RFeERNUXN3Q1FZRFZRUUdFd0pWVXpDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTHg1UzFEdDVTN25OSjhTQWJVKzdjK3dla3kwYTN2dHBuRkhVVW5Oa1k5dWUrazhsR0dNcWRaNXFaQUM3aWQraXMrS2J0RENncnBjZDJmU2NDZmVkb1RiY01pVnV5d0VTaUhiMzk0SG5tWndJVHhjRkUzYzN2bjNqWTRid0F3ZFBsSm1rMHhsblNHTjhzblIraDJVTjlXbGpJVVlqd0U4cm0vTHJIVXBJN0UycmcrYTBCemdqQ2phWjJ0cERQWmJXeko0YWdlYi8vZlJPb3hYbytnSzFIVmI5WUo0OW5lc1oveFVCRm5LRmFobEIwM1dJYmk3VmhUNTdzdk5oOHRHRHk3Nzc0aGRMaDZBN1pLaVZhcnpqZUFIRGRXQ015c3FHZHlxcytzR1Exb2s2dlBVMjN3RXR0VUMxbGw1azNuOGtwejgwaWg4YTBTRmJObTZWS2tSUzYwQ0F3RUFBYU9DQWpnd2dnSTBNQXdHQTFVZEV3RUIvd1FDTUFBd0h3WURWUjBqQkJnd0ZvQVVDZjdBRlpENXIyUUtraEs1SmloakRKZnNwN0l3Y0FZSUt3WUJCUVVIQVFFRVpEQmlNQzBHQ0NzR0FRVUZCekFDaGlGb2RIUndPaTh2WTJWeWRITXVZWEJ3YkdVdVkyOXRMM2QzWkhKbk15NWtaWEl3TVFZSUt3WUJCUVVITUFHR0pXaDBkSEE2THk5dlkzTndMbUZ3Y0d4bExtTnZiUzl2WTNOd01ETXRkM2RrY21jek1EVXdnZ0VlQmdOVkhTQUVnZ0VWTUlJQkVUQ0NBUTBHQ1NxR1NJYjNZMlFGQVRDQi96Q0J3d1lJS3dZQkJRVUhBZ0l3Z2JZTWdiTlNaV3hwWVc1alpTQnZiaUIwYUdseklHTmxjblJwWm1sallYUmxJR0o1SUdGdWVTQndZWEowZVNCaGMzTjFiV1Z6SUdGalkyVndkR0Z1WTJVZ2IyWWdkR2hsSUhSb1pXNGdZWEJ3YkdsallXSnNaU0J6ZEdGdVpHRnlaQ0IwWlhKdGN5QmhibVFnWTI5dVpHbDBhVzl1Y3lCdlppQjFjMlVzSUdObGNuUnBabWxqWVhSbElIQnZiR2xqZVNCaGJtUWdZMlZ5ZEdsbWFXTmhkR2x2YmlCd2NtRmpkR2xqWlNCemRHRjBaVzFsYm5SekxqQTNCZ2dyQmdFRkJRY0NBUllyYUhSMGNITTZMeTkzZDNjdVlYQndiR1V1WTI5dEwyTmxjblJwWm1sallYUmxZWFYwYUc5eWFYUjVMekFXQmdOVkhTVUJBZjhFRERBS0JnZ3JCZ0VGQlFjREF6QWRCZ05WSFE0RUZnUVVGUzZBUGNZOWZmY0NqWFNNd2pTRkUzWjBicEl3RGdZRFZSMFBBUUgvQkFRREFnZUFNQk1HQ2lxR1NJYjNZMlFHQVFjQkFmOEVBZ1VBTUJNR0NpcUdTSWIzWTJRR0FRUUJBZjhFQWdVQU1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ0g0RVNzYjdLaUp0TXNqaVNrUnRWdFFrc0R6bTRJMzRhN3R1bGU0c0VwbS91VXk3VTA3RnIrdGRaeDQ2dFBVdWJjRXd5QnBWeWZiMnVPUE5UcDRSbWVoeWdPRHZrR0VjNnZLVHBmNmxmbEtrQXU1Q2YvdktDbll2aTBQVUtMR2xQSGFWU1VrdWNMU3U5YnZHSGZXcnJkVnA3aWdQMTJSc0hSOXpySjFCMHJPdld2aExQSTh5TFk2R280RTdsMHU1aENmdXdCenhqemUrYUxxNmpuQ0J0a1lSdWtvejZtMkJTUE56N2dvSXg0Mnp0WEQzZnZSZDRHd2JENXBTZm4zQWpqZWFZdnNsbkt2ckRHLzZnYmNJVTZtYWhId05xKzJuS2owS3J5SVFlS3ZhT2hHdEtkbnM5QTgwazJua0Y4bVJyT3ZvNGFWTDdjbGl6ZzREYzhKcXExPC9kYXRhPgoJPC9hcnJheT4KCgk8a2V5PkRFUi1FbmNvZGVkLVByb2ZpbGU8L2tleT4KCTxkYXRhPk1JSU5Md1lKS29aSWh2Y05BUWNDb0lJTklEQ0NEUndDQVFFeER6QU5CZ2xnaGtnQlpRTUVBZ0VGQURDQ0F1b0dDU3FHU0liM0RRRUhBYUNDQXRzRWdnTFhNWUlDMHpBTURBZFdaWEp6YVc5dUFnRUJNQThNQ2xScGJXVlViMHhwZG1VQ0FVb3dFUXdJVUd4aGRHWnZjbTB3QlF3RGFVOVRNQk1NRGtseldHTnZaR1ZOWVc1aFoyVmtBUUVBTUJzTUNVRndjRWxFVG1GdFpRd09jMmxuYm1Gc0lISWdZbTl2YTNNd0hRd0VUbUZ0WlF3VmMybG5ibUZzTFhJdFpHVnRieTF3Y205bWFXeGxNQjBNREVOeVpXRjBhVzl1UkdGMFpSY05Nak13TmpFeU1UWXpOelU1V2pBZURBNVVaV0Z0U1dSbGJuUnBabWxsY2pBTURBcE5PRmt5VWxBNE5qYzFNQjhNRGtWNGNHbHlZWFJwYjI1RVlYUmxGdzB5TXpBNE1qWXhNVFV6TkROYU1DQU1GMUJ5YjJacGJHVkVhWE4wY21saWRYUnBiMjVVZVhCbERBVkJSRWhQUXpBb0RBaFVaV0Z0VG1GdFpRd2NUSFZ1WVNCU1pYTmxZWEpqYUNCRGIyeHNaV04wYVhabElFeE1RekFyREJ0QmNIQnNhV05oZEdsdmJrbGtaVzUwYVdacFpYSlFjbVZtYVhnd0RBd0tUVGhaTWxKUU9EWTNOVEFzREFSVlZVbEVEQ1JsTWpJek9HWXhZaTA1T0RVeExUUTVZVEF0T1dFNVlpMDFPR1pqTTJZNVpETXlNbVF3TVF3U1VISnZkbWx6YVc5dVpXUkVaWFpwWTJWek1Cc01HVEF3TURBNE1ETXdMVEF3TVRReE5EUTJNREk1TURRd01rVXdPd3dWUkdWMlpXeHZjR1Z5UTJWeWRHbG1hV05oZEdWek1DSUVJTDJCOHJncVV2N1kwUGl4cE9vZUNNOStaOGJUcW02WjdDQk4ySTVHTDZtZk1JSFdEQXhGYm5ScGRHeGxiV1Z1ZEhOd2djVUNBUUd3Z2I4d09nd1dZWEJ3YkdsallYUnBiMjR0YVdSbGJuUnBabWxsY2d3Z1RUaFpNbEpRT0RZM05TNWpiMjB1YzJsbmJtRnNjbVJsYlc4dVltOXZhM013TVF3alkyOXRMbUZ3Y0d4bExtUmxkbVZzYjNCbGNpNTBaV0Z0TFdsa1pXNTBhV1pwWlhJTUNrMDRXVEpTVURnMk56VXdFd3dPWjJWMExYUmhjMnN0WVd4c2IzY0JBUUF3T1F3V2EyVjVZMmhoYVc0dFlXTmpaWE56TFdkeWIzVndjekFmREF4Tk9Ga3lVbEE0TmpjMUxpb01EMk52YlM1aGNIQnNaUzUwYjJ0bGJxQ0NDRHN3Z2dKRE1JSUJ5YUFEQWdFQ0FnZ3R4ZnlJMHNWTGxUQUtCZ2dxaGtqT1BRUURBekJuTVJzd0dRWURWUVFEREJKQmNIQnNaU0JTYjI5MElFTkJJQzBnUnpNeEpqQWtCZ05WQkFzTUhVRndjR3hsSUVObGNuUnBabWxqWVhScGIyNGdRWFYwYUc5eWFYUjVNUk13RVFZRFZRUUtEQXBCY0hCc1pTQkpibU11TVFzd0NRWURWUVFHRXdKVlV6QWVGdzB4TkRBME16QXhPREU1TURaYUZ3MHpPVEEwTXpBeE9ERTVNRFphTUdjeEd6QVpCZ05WQkFNTUVrRndjR3hsSUZKdmIzUWdRMEVnTFNCSE16RW1NQ1FHQTFVRUN3d2RRWEJ3YkdVZ1EyVnlkR2xtYVdOaGRHbHZiaUJCZFhSb2IzSnBkSGt4RXpBUkJnTlZCQW9NQ2tGd2NHeGxJRWx1WXk0eEN6QUpCZ05WQkFZVEFsVlRNSFl3RUFZSEtvWkl6ajBDQVFZRks0RUVBQ0lEWWdBRW1Pa3ZQVUJ5cE8yVEluS0JFeHpkRUpYeHhhTk9jZHdVRnRrTzVhWUZLbmRrZTE5T09OTzdIRVMxZi9VZnRqSmlYY25waEZ0UE1FOFJXZ0Q5V0ZnTXBmVVBMRTBIUnhOMTJwZVhsMjh4WE8wcm5Yc2dPOWk1Vk5sZW1hUTZVUW94bzBJd1FEQWRCZ05WSFE0RUZnUVV1N0Rlb1ZnemlKcWtpcG5ldnIzcnI5ckxKS3N3RHdZRFZSMFRBUUgvQkFVd0F3RUIvekFPQmdOVkhROEJBZjhFQkFNQ0FRWXdDZ1lJS29aSXpqMEVBd01EYUFBd1pRSXhBSVBwd2NRV1hocGROQmpaN2UvMGJBNEFSa3U0MzdKR0VjVVAvZVo2aktHbWE4N0NBOVNjOVpQR2RMaHEzNm9qRlFJd2JXYUtFTXJVRGRSUHpZMURQclNLWTZVemJ1TnQyaGUzWkIvSVV5YjVpR0owT1FzWFc4dFJxQXpvR0FQbm9ySW9NSUlDNWpDQ0FtMmdBd0lCQWdJSU13M3UrTDlNYUM0d0NnWUlLb1pJemowRUF3TXdaekViTUJrR0ExVUVBd3dTUVhCd2JHVWdVbTl2ZENCRFFTQXRJRWN6TVNZd0pBWURWUVFMREIxQmNIQnNaU0JEWlhKMGFXWnBZMkYwYVc5dUlFRjFkR2h2Y21sMGVURVRNQkVHQTFVRUNnd0tRWEJ3YkdVZ1NXNWpMakVMTUFrR0ExVUVCaE1DVlZNd0hoY05NVGN3TWpJeU1qSXlNekl5V2hjTk16SXdNakU0TURBd01EQXdXakJ5TVNZd0pBWURWUVFEREIxQmNIQnNaU0JUZVhOMFpXMGdTVzUwWldkeVlYUnBiMjRnUTBFZ05ERW1NQ1FHQTFVRUN3d2RRWEJ3YkdVZ1EyVnlkR2xtYVdOaGRHbHZiaUJCZFhSb2IzSnBkSGt4RXpBUkJnTlZCQW9NQ2tGd2NHeGxJRWx1WXk0eEN6QUpCZ05WQkFZVEFsVlRNRmt3RXdZSEtvWkl6ajBDQVFZSUtvWkl6ajBEQVFjRFFnQUVCbXVrVm05OW55ZlJ6amFPa2h0V3pWUTJaRXJKbEdpWitza2dmdUwxV0EvYzRtcnJHVWN2THU4N3BBRzBBUk5FZkZvbXJhQ2NLU1dLNWVZR2IwOThXcU9COXpDQjlEQVBCZ05WSFJNQkFmOEVCVEFEQVFIL01COEdBMVVkSXdRWU1CYUFGTHV3M3FGWU00aWFwSXFaM3I2OTY2L2F5eVNyTUVZR0NDc0dBUVVGQndFQkJEb3dPREEyQmdnckJnRUZCUWN3QVlZcWFIUjBjRG92TDI5amMzQXVZWEJ3YkdVdVkyOXRMMjlqYzNBd015MWhjSEJzWlhKdmIzUmpZV2N6TURjR0ExVWRId1F3TUM0d0xLQXFvQ2lHSm1oMGRIQTZMeTlqY213dVlYQndiR1V1WTI5dEwyRndjR3hsY205dmRHTmhaek11WTNKc01CMEdBMVVkRGdRV0JCUjZSN280aWhVa1NDSkd6YjZQR2lSN05BTXFhVEFPQmdOVkhROEJBZjhFQkFNQ0FRWXdFQVlLS29aSWh2ZGpaQVlDRVFRQ0JRQXdDZ1lJS29aSXpqMEVBd01EWndBd1pBSXdGUXlwanNhdmxtbHJwNS9kWE5RRFdXeXVVdFJneG90MjRMZkZvdkVKZk9DYTQydXg0M3d4eENkNnA0NkovYXQzQWpCaE15RHhLZi81aHpLdUtjaGtQWFo3VWFUU0FpOTJ2bUFpa2ZIVk9uWGN0T0xHS3BiK3hnbmNTay9WSlBEOHlySXdnZ01HTUlJQ3JhQURBZ0VDQWdnUVorNE9hckcxWWpBS0JnZ3Foa2pPUFFRREFqQnlNU1l3SkFZRFZRUUREQjFCY0hCc1pTQlRlWE4wWlcwZ1NXNTBaV2R5WVhScGIyNGdRMEVnTkRFbU1DUUdBMVVFQ3d3ZFFYQndiR1VnUTJWeWRHbG1hV05oZEdsdmJpQkJkWFJvYjNKcGRIa3hFekFSQmdOVkJBb01Da0Z3Y0d4bElFbHVZeTR4Q3pBSkJnTlZCQVlUQWxWVE1CNFhEVEl6TURReE1qQXdNamcxT1ZvWERUSTNNRFV4TURJek1EVXdNRm93VGpFcU1DZ0dBMVVFQXd3aFYxZEVVaUJRY205MmFYTnBiMjVwYm1jZ1VISnZabWxzWlNCVGFXZHVhVzVuTVJNd0VRWURWUVFLREFwQmNIQnNaU0JKYm1NdU1Rc3dDUVlEVlFRR0V3SlZVekJaTUJNR0J5cUdTTTQ5QWdFR0NDcUdTTTQ5QXdFSEEwSUFCRXk5UXNjM2lWOEJlakF0K2NCaEw1NnR0UVZJRHRicWxlcGZUN0dyYUtaVUltUkJ3Nnc3Vm1SdTRyckpFbDg5aXlFd05UcWpqWllMc3dpaUZxSko4dWVqZ2dGUE1JSUJTekFNQmdOVkhSTUJBZjhFQWpBQU1COEdBMVVkSXdRWU1CYUFGSHBIdWppS0ZTUklJa2JOdm84YUpIczBBeXBwTUVFR0NDc0dBUVVGQndFQkJEVXdNekF4QmdnckJnRUZCUWN3QVlZbGFIUjBjRG92TDI5amMzQXVZWEJ3YkdVdVkyOXRMMjlqYzNBd015MWhjMmxqWVRRd016Q0JsZ1lEVlIwZ0JJR09NSUdMTUlHSUJna3Foa2lHOTJOa0JRRXdlekI1QmdnckJnRUZCUWNDQWpCdERHdFVhR2x6SUdObGNuUnBabWxqWVhSbElHbHpJSFJ2SUdKbElIVnpaV1FnWlhoamJIVnphWFpsYkhrZ1ptOXlJR1oxYm1OMGFXOXVjeUJwYm5SbGNtNWhiQ0IwYnlCQmNIQnNaU0JRY205a2RXTjBjeUJoYm1RdmIzSWdRWEJ3YkdVZ2NISnZZMlZ6YzJWekxqQWRCZ05WSFE0RUZnUVVEZ1dCV2M5THpWQzRMUDViNEVHQnF6OHp6Kzh3RGdZRFZSMFBBUUgvQkFRREFnZUFNQThHQ1NxR1NJYjNZMlFNRXdRQ0JRQXdDZ1lJS29aSXpqMEVBd0lEUndBd1JBSWdTbDE5eEpaTHJRcU9aWWE4dDQ5M0Vwd3JJNy9MMko4TGhid1lwVzdnTzgwQ0lHaUQ1OEsxeDFoMUNwNDNFSGV5VlJJWWlWQlRoWlZ3YnhXeExGN1c4cHd1TVlJQjF6Q0NBZE1DQVFFd2ZqQnlNU1l3SkFZRFZRUUREQjFCY0hCc1pTQlRlWE4wWlcwZ1NXNTBaV2R5WVhScGIyNGdRMEVnTkRFbU1DUUdBMVVFQ3d3ZFFYQndiR1VnUTJWeWRHbG1hV05oZEdsdmJpQkJkWFJvYjNKcGRIa3hFekFSQmdOVkJBb01Da0Z3Y0d4bElFbHVZeTR4Q3pBSkJnTlZCQVlUQWxWVEFnZ1FaKzRPYXJHMVlqQU5CZ2xnaGtnQlpRTUVBZ0VGQUtDQjZUQVlCZ2txaGtpRzl3MEJDUU14Q3dZSktvWklodmNOQVFjQk1Cd0dDU3FHU0liM0RRRUpCVEVQRncweU16QTJNVEl4TmpNM05UbGFNQ29HQ1NxR1NJYjNEUUVKTkRFZE1Cc3dEUVlKWUlaSUFXVURCQUlCQlFDaENnWUlLb1pJemowRUF3SXdMd1lKS29aSWh2Y05BUWtFTVNJRUlPSmpod3lNL29HK1I2R3hmdzhVNDhGTHMwVFlWdzQ2c1hBOU9XTFBGT3R3TUZJR0NTcUdTSWIzRFFFSkR6RkZNRU13Q2dZSUtvWklodmNOQXdjd0RnWUlLb1pJaHZjTkF3SUNBZ0NBTUEwR0NDcUdTSWIzRFFNQ0FnRkFNQWNHQlNzT0F3SUhNQTBHQ0NxR1NJYjNEUU1DQWdFb01Bb0dDQ3FHU000OUJBTUNCRWN3UlFJaEFLOFBIMy82T0l5QTRoaklmdGdnV3RBK1EzdWdYcy8vODVGMEQ1UG82R3dpQWlCL2FvbFI0dzZJaXhhZlJHRER3R2RUZk1LS3BUOWQyaWN6SnorTUtvWm41UT09PC9kYXRhPgoJCQkJCQkJCQoJPGtleT5FbnRpdGxlbWVudHM8L2tleT4KCTxkaWN0PgoJCQkJCgkJCQk8a2V5PmFwcGxpY2F0aW9uLWlkZW50aWZpZXI8L2tleT4KCQk8c3RyaW5nPk04WTJSUDg2NzUuY29tLnNpZ25hbHJkZW1vLmJvb2tzPC9zdHJpbmc+CgkJCQkKCQkJCTxrZXk+a2V5Y2hhaW4tYWNjZXNzLWdyb3Vwczwva2V5PgoJCTxhcnJheT4KCQkJCTxzdHJpbmc+TThZMlJQODY3NS4qPC9zdHJpbmc+CgkJCQk8c3RyaW5nPmNvbS5hcHBsZS50b2tlbjwvc3RyaW5nPgoJCTwvYXJyYXk+CgkJCQkKCQkJCTxrZXk+Z2V0LXRhc2stYWxsb3c8L2tleT4KCQk8ZmFsc2UvPgoJCQkJCgkJCQk8a2V5PmNvbS5hcHBsZS5kZXZlbG9wZXIudGVhbS1pZGVudGlmaWVyPC9rZXk+CgkJPHN0cmluZz5NOFkyUlA4Njc1PC9zdHJpbmc+CgoJPC9kaWN0PgoJPGtleT5FeHBpcmF0aW9uRGF0ZTwva2V5PgoJPGRhdGU+MjAyMy0wOC0yNlQxMTo1Mzo0M1o8L2RhdGU+Cgk8a2V5Pk5hbWU8L2tleT4KCTxzdHJpbmc+c2lnbmFsLXItZGVtby1wcm9maWxlPC9zdHJpbmc+Cgk8a2V5PlByb3Zpc2lvbmVkRGV2aWNlczwva2V5PgoJPGFycmF5PgoJCTxzdHJpbmc+MDAwMDgwMzAtMDAxNDE0NDYwMjkwNDAyRTwvc3RyaW5nPgoJPC9hcnJheT4KCTxrZXk+VGVhbUlkZW50aWZpZXI8L2tleT4KCTxhcnJheT4KCQk8c3RyaW5nPk04WTJSUDg2NzU8L3N0cmluZz4KCTwvYXJyYXk+Cgk8a2V5PlRlYW1OYW1lPC9rZXk+Cgk8c3RyaW5nPkx1bmEgUmVzZWFyY2ggQ29sbGVjdGl2ZSBMTEM8L3N0cmluZz4KCTxrZXk+VGltZVRvTGl2ZTwva2V5PgoJPGludGVnZXI+NzQ8L2ludGVnZXI+Cgk8a2V5PlVVSUQ8L2tleT4KCTxzdHJpbmc+ZTIyMzhmMWItOTg1MS00OWEwLTlhOWItNThmYzNmOWQzMjJkPC9zdHJpbmc+Cgk8a2V5PlZlcnNpb248L2tleT4KCTxpbnRlZ2Vy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"
        KEYCHAIN_PASSWORD: "745HX£325FH!"
      run: |
        # create variables
        CERTIFICATE_PATH=$RUNNER_TEMP/build_certificate.p12
        PP_PATH=$RUNNER_TEMP/build_pp.mobileprovision
        KEYCHAIN_PATH=$RUNNER_TEMP/app-signing.keychain-db

        # import certificate and provisioning profile from secrets
        echo -n "$APPLE_CERTIFICATE" | base64 --decode -o $CERTIFICATE_PATH
        echo -n "$PROVISIONING_PROFILE" | base64 --decode -o $PP_PATH

        # create temporary keychain
        security create-keychain -p "$KEYCHAIN_PASSWORD" $KEYCHAIN_PATH
        security set-keychain-settings -lut 21600 $KEYCHAIN_PATH
        security unlock-keychain -p "$KEYCHAIN_PASSWORD" $KEYCHAIN_PATH

        # import certificate to keychain
        security import $CERTIFICATE_PATH -P "$P12_PASSWORD" -A -t cert -f pkcs12 -k $KEYCHAIN_PATH
        security list-keychain -d user -s $KEYCHAIN_PATH

        # apply provisioning profile
        mkdir -p ~/Library/MobileDevice/Provisioning\ Profiles
        cp $PP_PATH ~/Library/MobileDevice/Provisioning\ Profiles

    - name: Deploy to TestFlight
      run: |
        # Build IPA
        xcodebuild clean -workspace "ios/Runner.xcworkspace" -scheme "Runner" -configuration Release
        xcodebuild archive -workspace "ios/Runner.xcworkspace" -scheme "Runner" -configuration Release -archivePath "build/ios/Runner.xcarchive"
        xcodebuild -exportArchive -archivePath "build/ios/Runner.xcarchive" -exportOptionsPlist "exportOptions.plist" -exportPath "build/ios/"

        # Upload to TestFlight
        altool --upload-app -f "build/ios/Runner.ipa" -t ios -u "mmk100@mail.aub.edu" -p "hveh-blaw-okdn-anbuc" --verbose
      env:
        ITC_USER: "mmk100@mail.aub.edu"
        ITC_APP_SPECIFIC_PASSWORD: "hveh-blaw-okdn-anbuc"
